// Tests typed bindings and annotated function signatures.

const ensure_module = import("test_support/ensure")
const ensure = ensure_module.ensure

fn add(lhs: Int, rhs: Int) Int {
  return lhs + rhs
}

const typed_port: Int = 8080
var retries: Int = 1
const config: Map(Str, Int) = .{ .port = typed_port, .retries = retries }
const sum: Int = add(2, 3)

retries = retries + 1

ensure(typed_port == 8080, "annotated immutable binding stays constant")
ensure(retries == 2, "annotated mutable binding updates")
ensure(config.port == 8080, "map literal honors annotated values")
ensure(sum == 5, "function annotations propagate correctly")

echo "type annotations test passed"
